---
SPDX-License-Identifier: MIT
path: "/tutorials/install-and-configure-x2goserver/de"
slug: "install-and-configure-x2goserver"
date: "2021-05-27"
title: "Installation und Konfiguration eines Ubuntu Remote Desktop mit XFCE unter Verwendung von X2Go"
short_description: "Hier wird die Einrichtung eines Ubuntu Remote Desktop mit X2Go-Server in der Hetzner Cloud beschrieben. Als leichtgewichtige Desktop-Umgebung wird XFCE genutzt"
tags: ["X2Go", "Ubuntu", "XFCE", "Debian", "LXDE"]
author: "Oliver Müller"
author_link: "https://github.com/omuehler"
author_img: "https://avatars.githubusercontent.com/u/77874042"
author_description: ""
language: "de"
available_languages: ["en", "de", "ru"]
header_img: "header-7"
cta: "cloud"
---

## Einführung

Dieses Tutorial erklärt, wie man einen Remote-Desktop auf einem Hetzner Cloud Server erstellt mit:
- Ubuntu 20.04 für einen vollwertigen Desktop mit XFCE und
- Debian 11 für einen sparsamen Desktop mit LXDE

Es wird eine graphische Benutzeroberfläche installiert. Außerdem wird ein neuer Benutzer angelegt, der über [X2Go](https://wiki.x2go.org/doku.php) verschlüsselt auf seinen Desktop zugreifen kann.

X2Go ist eine kostenlose Terminalserver-Lösung für die Verbindung zu verschiedenen Desktop-Umgebungen wie XFCE, LXDE, Mate usw.

**Voraussetzungen**

 - ein neu installierter Server, der in der Hetzner [Cloud Console](https://console.hetzner.cloud/) mit dem Basis-Image von Ubuntu 20.04 erstellt wurde
 - IP-Adresse
 - root-Zugang zum Server per SSH-Key <br> (siehe Tutorial über [Login mit SSH-Key (EN)](https://community.hetzner.com/tutorials/add-ssh-key-to-your-hetzner-cloud))

## Schritt 1 - Aktivieren der Firewall

Öffnen Sie Ihren neu angelegten Server im betreffenden Projekt in der Hetzner [Cloud Console](https://console.hetzner.cloud/).

Legen Sie eine neue Firewall an. Die Grundeinstellungen in Ihrer Firewall sind in Ordnung. Damit öffnen Sie den SSH-Port 22 zu Ihrem Server und schließen die anderen, nicht benötigten Ports.

![Basic firewall settings](images/firewall.png)

## Schritt 2 - Konfiguration am Server

### Schritt 2.1 - Aktualisierung des Betriebssystems und installieren der erforderlichen Pakete

Einlesen der Paketquellen und Systemupgrade durchführen:

```
apt update && apt upgrade -y
```

Während des Upgrades erscheint womöglich eine Meldung, bei der man sich entscheiden muss, ob man die bestehende SSH config oder die vom Maintainer übernehmen möchte. Es kann die Standardauswahl bestätigt werden.

Installieren der benötigten Pakete:

- **Für Ubuntu:**
  
  ```
  apt install xubuntu-desktop x2goserver x2goserver-xsession -y
  ```
  
  Tipp: Womöglich muss der Befehl 2-mal ausgeführt werden, da in wiederholten Tests die Installation des Desktops abbricht. Danach funktioniert die Installation problemlos.
  Womöglich wird bei der Installation gefragt, welcher Displaymanager verwendet werden soll, `lightdm` oder `gdm3`. `lightdm` auswählen für Performance.
 
- **Für Debian:**
  
  ```
  apt install lxde-core lxrandr x2goserver x2goserver-xsession firefox-esr xfce4-terminal pulseaudio -y
  ```

Erklärung:

- `xubuntu-desktop` > Vollständiger Desktop
- `x2goserver` > Server für die X2Go Session
- `x2goserver`-xsession > Tool für X2Go für die Kommunikation zum xServer
- `lxde-core` > Minimalistischer Desktop
- `lxrandr` > Zwingend notwendig, da sonst keine Auflösungen eingestellt werden können und nur 800x600 funktioniert
- `firefox-esr >` Notwendig, da lxde-core keinen Browser beinhaltet
- `xfce4-terminal` > Notwendig, da kein Terminal installiert. Benötigt keine Abhängigkeiten, ist daher schlank aber hat die nötigen Funktionen
- `pulseaudio` > Notwendig, falls Soundausgabe gefordert ist. Ist dies nicht notwendig, den Eintrag entfernen - spart viel Speicherplatz

Die oben genannten Befehle können auch in einer einzigen Zeile ausgeführt werden:

- **Ubuntu:**
  
  ```
  apt update && apt upgrade -y && apt install xubuntu-desktop x2goserver x2goserver-xsession -y
  ```
  
  - 2x Nutzereingabe notwendig (Auswahl der Standard SSH config und `lightdm` als Display Manager)
  - Aktuell Bug in der Repository, der 2-malige Ausführung erfordert
  - Speicherbedarf direkt nach Installation: 5553MB
  - RAM-Verbrauch mit 1 User @ Desktop @ 1080p: 540MB

- **Debian:**

  ```
  apt update && apt upgrade -y && apt install lxde-core lxrandr x2goserver x2goserver-xsession firefox-esr xfce4-terminal pulseaudio -y
  ```
  
  - Minimalistische Installation, weitere Tools womöglich notwendig (Archive Manager, Office, Mail Software...)
  - Speicherbedarf direkt nach Installation: 2357MB
  - RAM-Verbrauch mit 1 User @ Desktop @ 1080p: 172MB

### Schritt 2.2 - Erstellen des neuen X2Go-Benutzers

Für die Verbindung zu unserem Remote-Desktop werden wir nicht root verwenden. Wir legen einen neuen Benutzer an. In diesem Beispiel wird der Benutzer _holu_ genannt

```
adduser holu
```

```Shell
Adding user `holu' ...
Adding new group `holu' (1000) ...
Adding new user `holu' (1000) with group `holu' ...
Creating home directory `/home/holu' ...
Copying files from `/etc/skel' ...
New password: 
Retype new password: 
passwd: password updated successfully
Changing the user information for holu
Enter the new value, or press ENTER for the default
	Full Name []: Ho Lu       
	Room Number []:  
	Work Phone []: 
	Home Phone []: 
	Other []: 
Is the information correct? [Y/n] Y
```

### Schritt 2.3 - Neustart des Servers

```
reboot
```

## Schritt 3 - Konfigurieren der Client-Software

Um sich mit dem xubuntu-Desktop zu verbinden, müssen wir den [x2go-client](https://wiki.x2go.org/doku.php/doc:installation:x2goclient) auf der lokalen Workstation installieren.

Bitte benutzen Sie die Anleitung auf der Projekt-Webseite, wie Sie den Client auf Ihrem Rechner installieren.

Wenn die Installation abgeschlossen ist, können wir die Clientsoftware einrichten.

Erstellen Sie eine neue Sitzung im Client und fügen Sie die Parameter für Ihren Server ein.

 - **Login:** holu
 - **Host:** 157.90.XXX.XX (replace with your server IP)
 - **Sitzungsart:**
   - XFCE für Ubuntu
   - LXDE für Debian

![X2Go Client Settings](images/x2go-client.png)

Jetzt können Sie Ihre Sitzungseinstellungen speichern und eine Verbindung zu Ihrem Server herstellen.

![You are connected to your server](images/connection.png)

### Step 3.1 - Anpassung der Einstellung für bessere Benutzbarkeit und Performance:

Oft möchte man folgende Einstellungen anpassen:

Verbindung:

- Regler von ADSL auf ISDN stellen, wenn die Verbindung langsam ist und man eine geringere Bitrate nutzen möchte
- Kompressionsalgorithmus kann auf 256-jpeg eingestellt werden, um die Farbpalette zu beschränken. Diese Palette ist hoch-dynamisch, weshalb 256 Farben selten limitierend sind.

Ein-/Ausgabe:

- Eigener: Einstellung für Größe im Fenstermodus
- Ganzen Bildschirm verwenden: Vollständiges Ausfüllen eines Bildschirmes (Bildschirmnummer wählbar)
- Vollbild: Selbsterklärend
- DPI: kann eingestellt werden, für 1080p genügt 94

Medien:

- Anpassung für Druckerfreigabe und Soundübertragung möglich, Standardwerte in der Regel korrekte Wahl

Freigegebene Ordner:

- Ermöglicht das dynamische Einbinden von Ordnern zwischen lokalem Gerät und dem Server

Maximal erwartbare Geschwindigkeit:

Sollte jedes Pixel auf dem Bildschirm erneuert werden müssen, muss man mit einer Diashow rechnen. vServer haben keine dedicated GPU für die Hardwarebeschleunigung, weshalb selbst bei idealen Netzwerkbedingungen nicht 1FPS zu rechnen ist, wenn man z.B. auf YouTube ein Video in 360p auf einem 1080p Bildschirm wiedergibt, trotz der 256-jpeg compression.

## Ergebnis

Wenn Sie alle Schritte in dieser Anleitung befolgt haben, können Sie eine Verbindung zum Server über eine SSH-verschlüsselte Verbindung herstellen und einen Remote-Desktop mit einer XFCE-Oberfläche verwenden.

##### License: MIT

<!--

Contributor's Certificate of Origin

By making a contribution to this project, I certify that:

(a) The contribution was created in whole or in part by me and I have
    the right to submit it under the license indicated in the file; or

(b) The contribution is based upon previous work that, to the best of my
    knowledge, is covered under an appropriate license and I have the
    right under that license to submit that work with modifications,
    whether created in whole or in part by me, under the same license
    (unless I am permitted to submit under a different license), as
    indicated in the file; or

(c) The contribution was provided directly to me by some other person
    who certified (a), (b) or (c) and I have not modified it.

(d) I understand and agree that this project and the contribution are
    public and that a record of the contribution (including all personal
    information I submit with it, including my sign-off) is maintained
    indefinitely and may be redistributed consistent with this project
    or the license(s) involved.

Signed-off-by: Oliver Müller, oliver.mueller@hetzner.com

-->
